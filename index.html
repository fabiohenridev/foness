<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Fones de Ouvido Gamer Pro – Áudio de elite para gamers. Som surround 7.1, conforto e precisão para suas partidas.">
    <meta name="keywords" content="fones de ouvido gamer, áudio gamer, som surround, fones confortáveis, microfone pro">
    <title>Fones de Ouvido Gamer Pro – Áudio de Elite</title>
    <link rel="preload" href="fone-venda.webp" as="image">
    <link rel="icon" href="TEC.png" type="image/x-icon">
    <style>
        :root {
            --primary-color: #e63946;
            --secondary-color: #2a2a2a;
            --bg-color: #1f1f1f;
            --text-color: #e5e5e5;
            --hover-shadow: 0 6px 20px rgba(230,57,70,.6);
        }
        body {
            background: var(--bg-color);
            color: var(--text-color);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            line-height: 1.6;
            margin: 0;
        }
        .btn-red {
            background: var(--primary-color);
            transform: translateY(0);
            transition: transform .2s, box-shadow .3s, background .3s;
            box-shadow: 0 4px 15px rgba(230,57,70,.4);
        }
        .btn-red:hover {
            background: #b91c1c;
            transform: translateY(-2px);
            box-shadow: var(--hover-shadow);
        }
        .btn-red:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }
        .section-title {
            position: relative;
            display: inline-block;
            margin-bottom: 1.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,.5);
            font-size: clamp(1.5rem, 4vw, 2.5rem);
        }
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 50%;
            height: 3px;
            background: var(--primary-color);
        }
        .carousel-img {
            transition: transform .3s, box-shadow .3s;
            object-fit: cover;
            max-height: 400px;
            width: 100%;
            aspect-ratio: 3/2;
        }
        .carousel-img:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(230,57,70,.3);
        }
        .comment-card {
            display: flex;
            align-items: flex-start;
            transition: transform .2s, box-shadow .3s;
            background: var(--secondary-color);
            padding: 1.5rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }
        .comment-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--hover-shadow);
        }
        .comment-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            margin-right: 1rem;
            object-fit: cover;
            border: 2px solid var(--primary-color);
        }
        .comment-content { flex: 1; }
        .comment-date { font-size: .875rem; color: #6b7280; }
        section, header, footer {
            position: relative;
            z-index: 1;
        }
        section::before, header::before, footer::before,
        section::after, header::after, footer::after {
            content: '';
            position: absolute;
            left: 0;
            right: 0;
            height: 20px;
            z-index: -1;
        }
        header::before { top: -20px; background: linear-gradient(to bottom, transparent, var(--bg-color)); }
        header::after { bottom: -20px; background: linear-gradient(to bottom, var(--bg-color), var(--secondary-color)); }
        section:nth-of-type(1)::before { top: -20px; background: linear-gradient(to bottom, var(--secondary-color), var(--bg-color)); }
        section::after { bottom: -20px; background: linear-gradient(to bottom, var(--bg-color), var(--secondary-color)); }
        section:nth-of-type(2)::before, section:nth-of-type(3)::before { top: -20px; background: linear-gradient(to bottom, var(--secondary-color), var(--bg-color)); }
        footer::before { top: -20px; background: linear-gradient(to bottom, var(--secondary-color), var(--bg-color)); }
        input, textarea {
            transition: box-shadow .3s, border-color .3s;
            background: #2a2a2a;
            border: 1px solid #6b7280;
            color: var(--text-color);
        }
        input:focus, textarea:focus {
            box-shadow: 0 0 10px rgba(230,57,70,.4);
            border-color: var(--primary-color);
            outline: none;
        }
        input.error, textarea.error {
            border-color: #ef4444;
            box-shadow: 0 0 10px rgba(239,68,68,.4);
        }
        .carousel-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            overflow: hidden;
            border-radius: 8px;
        }
        .carousel {
            display: flex;
            width: 100%;
            transition: transform .5s ease-in-out;
        }
        .carousel-item { flex: 0 0 100%; width: 100%; }
        .carousel-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,.5);
            color: var(--text-color);
            padding: .5rem 1rem;
            border: none;
            cursor: pointer;
            font-size: 1.5rem;
            transition: background .3s;
            z-index: 10;
        }
        .carousel-btn:hover { background: rgba(230,57,70,.7); }
        .carousel-btn:focus { outline: 2px solid var(--primary-color); outline-offset: 2px; }
        .prev-btn { left: 10px; }
        .next-btn { right: 10px; }
        .carousel-dots {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
        }
        .carousel-dot {
            width: 12px;
            height: 12px;
            background: var(--secondary-color);
            border-radius: 50%;
            cursor: pointer;
            transition: background .3s;
        }
        .carousel-dot.active { background: var(--primary-color); }
        .carousel-dot:focus { outline: 2px solid var(--primary-color); outline-offset: 2px; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            opacity: 0;
            animation: fadeIn 0.6s ease-out forwards;
        }
        .spinner {
            display: none;
            border: 4px solid rgba(255,255,255,.3);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        #commentsList {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        @media (min-width: 768px) {
            #commentsList {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: space-between;
            }
            .comment-card { flex: 0 0 calc(50% - .5rem); }
        }
        @media (max-width: 640px) {
            .carousel-img { max-height: 300px; }
            .btn-red { padding: 0.75rem 1.5rem; font-size: 1rem; }
            ul.space-y-4 { space-y: 2; }
            p, li { font-size: 0.95rem; }
        }
        .high-contrast {
            background: #000;
            color: #fff;
        }
        .high-contrast .btn-red { background: #ff5555; }
        .high-contrast .section-title::after { background: #ff5555; }
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary-color);
            color: white;
            padding: 8px;
            z-index: 100;
        }
        .skip-link:focus {
            top: 0;
        }
    </style>
    <!-- Meta Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
        n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');fbq('init','3039782552846318');fbq('track','PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=3039782552846318&ev=PageView&noscript=1"/></noscript>
</head>
<body class="font-sans">
    <a href="#main-content" class="skip-link">Pular para o conteúdo</a>
    <header class="text-white py-6" style="background-color: var(--bg-color);">
        <div class="container mx-auto text-center">
            <h1 class="text-4xl md:text-5xl font-bold">Fone de Ouvido Gamer Pro</h1>
            <p class="mt-3 text-lg md:text-xl text-gray-400">Entre no campo de batalha com áudio de elite e conquiste a vitória que você merece.</p>
        </div>
    </header>

    <main id="main-content">
        <section class="py-16 fade-in" style="background-color: var(--bg-color);">
            <div class="container mx-auto px-4">
                <div class="flex flex-col md:flex-row items-center">
                    <div class="md:w-1/2">
                        <div class="carousel-container" role="region" aria-label="Carrossel de imagens do produto">
                            <div class="carousel" id="carousel">
                                <div class="carousel-item"><img src="fone-venda.webp" alt="Fone de ouvido Gamer Pro em fundo escuro com luz vermelha" class="carousel-img rounded-lg shadow-lg" loading="eager" onerror="this.src='https://via.placeholder.com/600x400?text=Imagem+1'"></div>
                                <div class="carousel-item"><img src="fone-venda-2.webp" alt="Detalhe do conector em L do fone Gamer Pro" class="carousel-img rounded-lg shadow-lg" loading="lazy" onerror="this.src='https://via.placeholder.com/600x400?text=Imagem+2'"></div>
                                <div class="carousel-item"><img src="fone-venda-3.webp" alt="Fone Gamer Pro em uso durante uma partida" class="carousel-img rounded-lg shadow-lg" loading="lazy" onerror="this.src='https://via.placeholder.com/600x400?text=Imagem+3'"></div>
                                <div class="carousel-item"><img src="fone-venda-4.webp" alt="Close-up das almofadas de silicone do fone" class="carousel-img rounded-lg shadow-lg" loading="lazy" onerror="this.src='https://via.placeholder.com/600x400?text=Imagem+4'"></div>
                                <div class="carousel-item"><img src="fone-venda-5.webp" alt="Microfone destacável do Gamer Pro" class="carousel-img rounded-lg shadow-lg" loading="lazy" onerror="this.src='https://via.placeholder.com/600x400?text=Imagem+5'"></div>
                                <div class="carousel-item"><img src="fone-venda-6.webp" alt="Fone em embalagem premium" class="carousel-img rounded-lg shadow-lg" loading="lazy" onerror="this.src='https://via.placeholder.com/600x400?text=Imagem+6'"></div>
                                <div class="carousel-item"><img src="fone-venda-7.webp" alt="Vista lateral do fone com acabamento fosco" class="carousel-img rounded-lg shadow-lg" loading="lazy" onerror="this.src='https://via.placeholder.com/600x400?text=Imagem+7'"></div>
                                <div class="carousel-item"><img src="fone-venda-8.webp" alt="Fone em ação com luzes RGB" class="carousel-img rounded-lg shadow-lg" loading="lazy" onerror="this.src='https://via.placeholder.com/600x400?text=Imagem+8'"></div>
                            </div>
                            <button class="carousel-btn prev-btn" aria-label="Imagem anterior">❮</button>
                            <button class="carousel-btn next-btn" aria-label="Próxima imagem">❯</button>
                            <div class="carousel-dots" id="carousel-dots" role="tablist"></div>
                        </div>
                    </div>
                    <div class="md:w-1/2 md:pl-8 mt-8 md:mt-0">
                        <h2 class="text-3xl md:text-4xl font-bold text-white section-title">Imagine a cena decisiva…</h2>
                        <p class="mt-4 text-gray-400">
                            A tela treme com uma explosão, você ouve passos furtivos pelo flanco direito e, num instante, reage antes que o inimigo saiba de onde veio o ataque. Essa vantagem nasce aqui – nos detalhes de engenharia do <strong>Gamer Pro</strong>.
                        </p>
                        <h3 class="mt-6 text-2xl font-bold text-white">Por que eleva seu jogo:</h3>
                        <ul class="mt-4 space-y-4 text-gray-300">
                            <li><span class="font-bold text-red-500">🎧 Som Surround 7.1:</span> Camadas sonoras realistas para identificar posições, distâncias e movimentos com precisão cirúrgica.</li>
                            <li><span class="font-bold text-red-500">🔇 Tripla barreira de ruído + microfone PRO:</span> DSP inteligente, cápsulas PET focadas em voz e haste metálica destacável para comunicação cristalina.</li>
                            <li><span class="font-bold text-red-500">🕹️ Conector em “L”:</span> Plugue a 90° que não atrapalha a pegada no controle ou celular.</li>
                            <li><span class="font-bold text-red-500">👂 Conforto que não cede:</span> Almofadas de silicone que não escorregam, ideais para maratonas de jogo.</li>
                        </ul>
                        <p class="mt-6 text-gray-400">
                            <strong>Não jogue mais no escuro sonoro.</strong> Clique em “Comprar agora” e transforme cada partida em um espetáculo de imersão, precisão e conforto.
                        </p>
                    </div>
                </div>
                <div class="mt-12 p-8 rounded-lg fade-in" style="background-color: var(--secondary-color);">
                    <h3 class="text-2xl md:text-3xl font-bold text-white section-title">Especificações que fazem a diferença</h3>
                    <ul class="mt-6 text-gray-400 grid grid-cols-1 md:grid-cols-2 gap-4">
                        <li><strong>Frequência:</strong> 20 Hz – 20 kHz</li>
                        <li><strong>Impedância:</strong> 16 Ω</li>
                        <li><strong>Sensibilidade:</strong> 109 dB</li>
                        <li><strong>Distorção Harmônica:</strong> ≤ 1 %</li>
                        <li><strong>Driver:</strong> 10 mm – diafragma de alta precisão</li>
                        <li><strong>Cabo:</strong> 1,2 m em TPE flexível e resistente</li>
                        <li><strong>Plugue:</strong> P3 3,5 mm “L-bend”</li>
                        <li><strong>Tipo:</strong> In-ear com fio</li>
                        <li><strong>Microfones:</strong> Integrado + haste removível com cancelamento</li>
                    </ul>
                </div>
                <p class="mt-6 text-lg text-red-600 font-bold text-center">Por apenas <span class="text-2xl">R$ 59,99</span> transforme sua experiência de jogo HOJE!</p>
                <div class="mt-8 text-center">
                    <a href="https://wa.me/5584991562754?text=ol%C3%A1,%20estou%20interessado%20pelo%20fone%20e%20gostaria%20de%20comprar%20!%F0%9F%98%83%F0%9F%98%83"
                       class="btn-red text-white px-8 py-4 rounded-lg text-lg font-semibold shadow-lg inline-block"
                       aria-label="Comprar pelo WhatsApp" target="_blank">Comprar pelo WhatsApp</a>
                </div>
            </div>
        </section>

        <section class="py-16 fade-in" style="background-color: var(--bg-color);">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-center text-white section-title">Perguntas Frequentes</h2>
                <div class="mt-10 max-w-3xl mx-auto space-y-4">
                    <details class="bg-gray-800 p-4 rounded-lg">
                        <summary class="text-white font-semibold cursor-pointer">O fone é compatível com consoles?</summary>
                        <p class="mt-2 text-gray-400">Sim, o Gamer Pro é compatível com PS4, PS5, Xbox e Nintendo Switch via conector 3,5 mm.</p>
                    </details>
                    <details class="bg-gray-800 p-4 rounded-lg">
                        <summary class="text-white font-semibold cursor-pointer">Qual o prazo de entrega?</summary>
                        <p class="mt-2 text-gray-400">Envio em até 24h em dias úteis, com entrega entre 3-7 dias dependendo da região.</p>
                    </details>
                    <details class="bg-gray-800 p-4 rounded-lg">
                        <summary class="text-white font-semibold cursor-pointer">O microfone é removível?</summary>
                        <p class="mt-2 text-gray-400">Sim, a haste metálica com cancelamento de ruído é destacável para maior praticidade.</p>
                    </details>
                </div>
            </div>
        </section>

        <section class="py-8 fade-in" style="background-color: var(--bg-color);">
            <div class="container mx-auto text-center">
                <blockquote class="text-gray-200 italic text-lg max-w-2xl mx-auto">
                    “Ouvi o passo do adversário antes dele virar a esquina. Essa fração de segundo valeu a vitória do time.”<br>
                    <span class="font-bold text-white">– Thiago M., jogador competitivo</span>
                </blockquote>
            </div>
        </section>

        <section class="py-16 fade-in" style="background-color: var(--bg-color);">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-center text-white section-title">O que os Gamers Estão Dizendo</h2>
                <div class="mt-10 grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="comment-card p-6 rounded-lg shadow-lg">
                        <p class="text-gray-400">"O som é tão claro que ouvi o inimigo antes de vê-lo! Esses fones mudaram meu jogo."</p>
                        <p class="mt-4 font-bold text-white">- João Silva</p>
                    </div>
                    <div class="comment-card p-6 rounded-lg shadow-lg">
                        <p class="text-gray-400">"Confortáveis por horas e o microfone é perfeito para estratégias em equipe."</p>
                        <p class="mt-4 font-bold text-white">- Maria Oliveira</p>
                    </div>
                    <div class="comment-card p-6 rounded-lg shadow-lg">
                        <p class="text-gray-400">"Melhor custo-benefício que já vi. Não jogo mais sem eles!"</p>
                        <p class="mt-4 font-bold text-white">- Pedro Santos</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-16 fade-in" style="background-color: var(--bg-color);">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl md:text-4xl font-bold text-center text-white section-title">Deixe Seu Comentário</h2>
                <p class="mt-3 text-center text-gray-400">Compartilhe sua experiência com os Fones de Ouvido Gamer Pro!</p>
                <div class="mt-10 max-w-md mx-auto">
                    <div id="commentForm" class="space-y-4">
                        <div>
                            <label for="commentName" class="sr-only">Seu Nome</label>
                            <input type="text" id="commentName" placeholder="Seu Nome" class="w-full px-4 py-3 rounded-lg text-white" required aria-describedby="name-error">
                            <span id="name-error" class="text-red-600 text-sm hidden"></span>
                        </div>
                        <div>
                            <label for="commentEmail" class="sr-only">Seu Email</label>
                            <input type="email" id="commentEmail" placeholder="Seu Email" class="w-full px-4 py-3 rounded-lg text-white" required aria-describedby="email-error">
                            <span id="email-error" class="text-red-600 text-sm hidden"></span>
                        </div>
                        <div>
                            <label for="commentMessage" class="sr-only">Seu Comentário</label>
                            <textarea id="commentMessage" placeholder="Seu Comentário" class="w-full px-4 py-3 rounded-lg text-white" rows="4" required aria-describedby="message-error"></textarea>
                            <span id="message-error" class="text-red-600 text-sm hidden"></span>
                        </div>
                        <button id="submitComment" class="w-full btn-red text-white px-6 py-3 rounded-lg text-lg font-semibold" aria-label="Enviar Comentário">
                            <span id="submitText">Enviar Comentário</span>
                            <span id="submitSpinner" class="spinner"></span>
                        </button>
                    </div>
                    <div id="formFeedback" class="mt-4 text-center text-gray-400 hidden"></div>
                </div>
                <h3 class="mt-8 text-2xl font-bold text-center text-white">Comentários dos Usuários</h3>
                <div id="connectionStatus" class="text-center text-gray-400" role="status"></div>
                <div id="commentsList" role="list"></div>
            </div>
        </section>
    </main>

    <footer class="text-white py-6 fade-in" style="background-color: var(--bg-color);">
        <div class="container mx-auto text-center">
            <p>© 2025 Fones de Ouvido Gamer Pro. Todos os direitos reservados.</p>
            <p class="mt-2 text-sm text-gray-400">Envio em até 24h em dias úteis | Suporte dedicado</p>
            <div class="mt-4 flex justify-center gap-4">
                <a href="https://facebook.com" target="_blank" aria-label="Facebook" class="text-gray-400 hover:text-red-500"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8v-6.9H7V12h3V9.43c0-2.57 1.54-3.98 3.88-3.98.73 0 1.5.13 2.25.37v2.6h-1.26c-1.24 0-1.63.77-1.63 1.56V12h2.78l-.45 2.9h-2.33V21.8c4.56-.93 8-4.96 8-9.8z"/></svg></a>
                <a href="https://twitter.com" target="_blank" aria-label="Twitter" class="text-gray-400 hover:text-red-500"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/></svg></a>
                <a href="https://instagram.com" target="_blank" aria-label="Instagram" class="text-gray-400 hover:text-red-500"><svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.16c3.2 0 3.58.01 4.85.07 1.27.06 2.15.26 2.91.56.8.32 1.47.74 2.14 1.41.67.67 1.09 1.34 1.41 2.14.3.76.5 1.64.56 2.91.06 1.27.07 1.65.07 4.85s-.01 3.58-.07 4.85c-.06 1.27-.26 2.15-.56 2.91-.32.8-.74 1.47-1.41 2.14-.67.67-1.34 1.09-2.14 1.41-.76.3-1.64.5-2.91.56-1.27.06-1.65.07-4.85.07s-3.58-.01-4.85-.07c-1.27-.06-2.15-.26-2.91-.56-.8-.32-1.47-.74-2.14-1.41-.67-.67-1.09-1.34-1.41-2.14-.3-.76-.5-1.64-.56-2.91-.06-1.27-.07-1.65-.07-4.85s.01-3.58.07-4.85c.06-1.27.26-2.15.56-2.91.32-.8.74-1.47 1.41-2.14.67-.67 1.34-1.09 2.14-1.41.76-.3 1.64-.5 2.91-.56C8.42 2.17 8.8 2.16 12 2.16zM12 0C8.74 0 8.33.01 7.05.07c-1.28.06-2.16.26-2.93.56-.8.32-1.48.74-2.16 1.42S.7 3.53.38 4.33c-.3.77-.5 1.65-.56 2.93C.01 8.54 0 8.95 0 12s.01 3.46.07 4.74c.06 1.28.26 2.16.56 2.93.32.8.74 1.48 1.42 2.16s1.36 1.09 2.16 1.41c.77.3 1.65.5 2.93.56 1.28.06 1.69.07 4.74.07s3.46-.01 4.74-.07c1.28-.06 2.16-.26 2.93-.56.8-.32 1.48-.74 2.16-1.42s1.09-1.36 1.41-2.16c.3-.77.5-1.65.56-2.93.06-1.28.07-1.69.07-4.74s-.01-3.46-.07-4.74c-.06-1.28-.26-2.16-.56-2.93-.32-.8-.74-1.48-1.42-2.16S20.47.7 19.67.38c-.77-.3-1.65-.5-2.93-.56C15.46.01 15.05 0 12 0zM12 5.84A6.16 6.16 0 105.84 12 6.16 6.16 0 0012 5.84zm0 10.16A4 4 0 118 12a4 4 0 014 0zm4.85-9.85c0 .8-.65 1.45-1.45 1.45s-1.45-.65-1.45-1.45.65-1.45 1.45-1.45 1.45.65 1.45 1.45z"/></svg></a>
            </div>
        </div>
    </footer>

    <script src="https://cdn.socket.io/4.5.0/socket.io.min.js"></script>
    <script>
        // Lazy-load Tailwind CSS
        const tailwindScript = document.createElement('script');
        tailwindScript.src = 'https://cdn.tailwindcss.com';
        tailwindScript.async = true;
        document.head.appendChild(tailwindScript);

        const API_BASE_URL = 'https://backend-fone.onrender.com';
        let socket;

        function updateConnectionStatus(status, msg) {
            const el = document.getElementById('connectionStatus');
            el.textContent = msg;
            el.className = `text-center ${status === 'connected' ? 'text-green-600' : status === 'disconnected' ? 'text-red-600' : 'text-yellow-600'}`;
        }

        try {
            socket = io(API_BASE_URL, {
                transports: ['websocket'],
                reconnection: true,
                reconnectionAttempts: Infinity,
                reconnectionDelay: 1000,
                reconnectionDelayMax: 5000,
                randomizationFactor: 0.5
            });
            socket.on('connect', () => { updateConnectionStatus('connected', 'Conectado ao servidor.'); loadComments(); });
            socket.on('disconnect', () => updateConnectionStatus('disconnected', 'Conexão perdida. Tentando reconectar...'));
            socket.on('reconnect', () => { updateConnectionStatus('connected', 'Reconectado!'); loadComments(); });
            socket.on('reconnect_attempt', () => updateConnectionStatus('reconnecting', 'Tentando reconectar...'));
            socket.on('reconnect_failed', () => updateConnectionStatus('disconnected', 'Não foi possível reconectar. Recarregue a página.'));
            socket.on('newComment', addCommentToDOM);
        } catch (e) {
            updateConnectionStatus('disconnected', 'Erro na conexão. Verifique sua rede.');
        }

        // Carousel
        const carousel = document.getElementById('carousel'),
              items = document.querySelectorAll('.carousel-item'),
              prevBtn = document.querySelector('.prev-btn'),
              nextBtn = document.querySelector('.next-btn'),
              dotsContainer = document.getElementById('carousel-dots');
        let currentIndex = 0;

        function createDots() {
            dotsContainer.innerHTML = '';
            items.forEach((_, i) => {
                const dot = document.createElement('button');
                dot.classList.add('carousel-dot');
                dot.setAttribute('role', 'tab');
                dot.setAttribute('aria-label', `Imagem ${i + 1}`);
                dot.setAttribute('aria-selected', i === 0);
                if (i === 0) dot.classList.add('active');
                dot.addEventListener('click', () => goToSlide(i));
                dotsContainer.appendChild(dot);
            });
        }

        function updateCarousel() {
            carousel.style.transform = `translateX(-${currentIndex * 100}%)`;
            document.querySelectorAll('.carousel-dot').forEach((dot, i) => {
                dot.classList.toggle('active', i === currentIndex);
                dot.setAttribute('aria-selected', i === currentIndex);
            });
        }

        function goToSlide(i) {
            currentIndex = (i + items.length) % items.length;
            updateCarousel();
        }

        createDots();
        updateCarousel();
        prevBtn.addEventListener('click', () => goToSlide(currentIndex - 1));
        nextBtn.addEventListener('click', () => goToSlide(currentIndex + 1));
        let autoSlide = setInterval(() => goToSlide(currentIndex + 1), 5000);
        carousel.addEventListener('mouseenter', () => clearInterval(autoSlide));
        carousel.addEventListener('mouseleave', () => autoSlide = setInterval(() => goToSlide(currentIndex + 1), 5000));

        // Touch support for carousel
        let touchStartX = 0;
        let touchEndX = 0;
        carousel.addEventListener('touchstart', e => {
            touchStartX = e.changedTouches[0].screenX;
        });
        carousel.addEventListener('touchend', e => {
            touchEndX = e.changedTouches[0].screenX;
            if (touchStartX - touchEndX > 50) goToSlide(currentIndex + 1);
            if (touchEndX - touchStartX > 50) goToSlide(currentIndex - 1);
        });

        // Comments
        function escapeHTML(s) {
            return s.replace(/[&<>"'\/]/g, ch => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;', '/': '&#x2F;' }[ch]));
        }

        function simpleHash(str) {
            let h = 0;
            for (let i = 0; i < str.length; i++) { h = ((h << 5) - h) + str.charCodeAt(i); h &= h; }
            return Math.abs(h);
        }

        const avatarColors = ['E63946', '457B9D', '2A9D8F', 'F4A261', '9B59B6', 'E76F51'];
        function getAvatarUrl(name, email) {
            const seed = encodeURIComponent(name || 'unknown'),
                  color = avatarColors[email ? simpleHash(email) % avatarColors.length : 0];
            return `https://api.dicebear.com/9.x/initials/svg?seed=${seed}&backgroundColor=${color}&fontSize=40`;
        }

        function addCommentToDOM(c) {
            const list = document.getElementById('commentsList');
            const empty = list.querySelector('p.text-gray-400.text-center');
            if (empty) list.innerHTML = '';
            const card = document.createElement('div');
            card.className = 'comment-card';
            card.setAttribute('role', 'listitem');
            card.innerHTML = `
                <img src="${getAvatarUrl(c.name, c.email)}" alt="Avatar de ${escapeHTML(c.name)}" class="comment-avatar" loading="lazy">
                <div class="comment-content">
                    <p class="text-gray-400">${escapeHTML(c.message)}</p>
                    <p class="mt-2 font-bold text-white">- ${escapeHTML(c.name)}</p>
                    <p class="comment-date">${new Date(c.createdAt).toLocaleDateString('pt-BR')}</p>
                </div>`;
            list.prepend(card);
        }

        async function loadComments(attempt = 1) {
            const list = document.getElementById('commentsList');
            list.innerHTML = '<p class="text-gray-400 text-center">Carregando comentários...</p>';
            try {
                const res = await fetch(`${API_BASE_URL}/api/comments`);
                if (!res.ok) throw new Error(res.status);
                const comments = await res.json();
                list.innerHTML = '';
                if (!comments.length) {
                    list.innerHTML = '<p class="text-gray-400 text-center">Nenhum comentário ainda. Seja o primeiro!</p>';
                    return;
                }
                comments.reverse().forEach(addCommentToDOM);
            } catch (err) {
                if (attempt < 3) setTimeout(() => loadComments(attempt + 1), attempt * 2000);
                else list.innerHTML = '<p class="text-red-600 text-center">Erro ao carregar comentários. Tente novamente mais tarde.</p>';
            }
        }

        // Form validation and submission
        const commentForm = document.getElementById('commentForm');
        const nameInput = document.getElementById('commentName');
        const emailInput = document.getElementById('commentEmail');
        const messageInput = document.getElementById('commentMessage');
        const submitButton = document.getElementById('submitComment');
        const submitText = document.getElementById('submitText');
        const submitSpinner = document.getElementById('submitSpinner');
        const feedback = document.getElementById('formFeedback');
        const nameError = document.getElementById('name-error');
        const emailError = document.getElementById('email-error');
        const messageError = document.getElementById('message-error');

        function showError(input, errorElement, message) {
            input.classList.add('error');
            errorElement.textContent = message;
            errorElement.classList.remove('hidden');
        }

        function clearErrors() {
            nameInput.classList.remove('error');
            emailInput.classList.remove('error');
            messageInput.classList.remove('error');
            nameError.classList.add('hidden');
            emailError.classList.add('hidden');
            messageError.classList.add('hidden');
            feedback.classList.add('hidden');
        }

        commentForm.addEventListener('input', () => {
            clearErrors();
            if (!nameInput.value.trim()) showError(nameInput, nameError, 'Nome é obrigatório.');
            if (!emailInput.value.trim()) showError(emailInput, emailError, 'Email é obrigatório.');
            else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value.trim())) showError(emailInput, emailError, 'Email inválido.');
            if (!messageInput.value.trim()) showError(messageInput, messageError, 'Comentário é obrigatório.');
        });

        submitButton.addEventListener('click', async () => {
            clearErrors();
            const name = nameInput.value.trim();
            const email = emailInput.value.trim();
            const message = messageInput.value.trim();

            if (!name || !email || !message || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                if (!name) showError(nameInput, nameError, 'Nome é obrigatório.');
                if (!email) showError(emailInput, emailError, 'Email é obrigatório.');
                else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) showError(emailInput, emailError, 'Email inválido.');
                if (!message) showError(messageInput, messageError, 'Comentário é obrigatório.');
                return;
            }

            submitText.classList.add('hidden');
            submitSpinner.style.display = 'block';
            submitButton.disabled = true;

            try {
                const r = await fetch(`${API_BASE_URL}/api/comments`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name, email, message })
                });
                if (!r.ok) throw new Error((await r.json()).error || r.status);
                feedback.textContent = 'Comentário enviado com sucesso!';
                feedback.classList.remove('hidden');
                feedback.classList.add('text-green-600');
                nameInput.value = '';
                emailInput.value = '';
                messageInput.value = '';
            } catch (err) {
                feedback.textContent = `Erro ao enviar comentário: ${err.message}`;
                feedback.classList.remove('hidden');
                feedback.classList.add('text-red-600');
            } finally {
                submitText.classList.remove('hidden');
                submitSpinner.style.display = 'none';
                submitButton.disabled = false;
            }
        });

        // Scroll animations
        const fadeElements = document.querySelectorAll('.fade-in');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.1 });
        fadeElements.forEach(el => observer.observe(el));

        // Accessibility
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Tab') {
                document.querySelectorAll('[tabindex="0"]').forEach(el => el.setAttribute('tabindex', '0'));
            }
            if (e.key === 'h' && e.altKey) {
                document.body.classList.toggle('high-contrast');
            }
        });

        // Periodic server check
        setInterval(async () => {
            try { await fetch(`${API_BASE_URL}/ping`); } catch (e) {}
        }, 300000);
    </script>
</body>
</html>